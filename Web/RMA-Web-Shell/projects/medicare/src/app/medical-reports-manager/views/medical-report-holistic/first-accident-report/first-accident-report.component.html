<mat-card>
    <div class="menu-bar">
        <span class="material-icons">
            assignment
        </span>
        First Medical Report
        <span *ngIf="form && form.valid" (click)="save()" class="material-icons pointer right pulseGreen" matTooltip="save">
            save
        </span>
    </div>
    <br />

    <form [formGroup]="form" class="mat-container details-form" *ngIf="this.form">
        <section>
            <mat-form-field class="mat-form-field" color="accent">
                <label class="mat-label other-label mandatory-field">First consultation date</label>
                <input matInput [matDatepicker]="pickerFirstConsultationDate" formControlName="firstConsultationDate" id="firstConsultationDate">
                <mat-datepicker-toggle matSuffix [for]="pickerFirstConsultationDate"></mat-datepicker-toggle>
                <mat-datepicker #pickerFirstConsultationDate></mat-datepicker>
            </mat-form-field>
        </section>

        <section>
            <mat-form-field class="mat-form-field" color="accent">
                <label class="mat-label other-label">Is the patient unfit for work?</label>&nbsp;
                <input [hidden]="true" matInput formControlName="isUnfitForWork"/>
                <mat-radio-group (change)="isUnfitForWorkChanged($event.value)" formControlName="isUnfitForWork" id="isUnfitForWork">
                    <mat-radio-button value="Yes">Yes</mat-radio-button>&nbsp;
                    <mat-radio-button value="No">No</mat-radio-button>
                </mat-radio-group>
            </mat-form-field>
        </section>

        <section *ngIf="form.value.isUnfitForWork == 'Yes'">
            <mat-form-field class="mat-form-field">
                <label class="mat-label other-label mandatory-field">Unfit Start Date</label>
                <input matInput [matDatepicker]="unfitStartPicker" formControlName="unfitStartDate" id="unfitStartDate">
                <mat-datepicker-toggle matSuffix [for]="unfitStartPicker"></mat-datepicker-toggle>
                <mat-datepicker #unfitStartPicker></mat-datepicker>
            </mat-form-field>
            <br />
            <mat-form-field class="mat-form-field">
                <label class="mat-label other-label mandatory-field">Unfit End Date</label>
                <input matInput [matDatepicker]="unfitEndPicker" formControlName="unfitEndDate" id="unfitEndDate">
                <mat-datepicker-toggle matSuffix [for]="unfitEndPicker"></mat-datepicker-toggle>
                <mat-datepicker #unfitEndPicker></mat-datepicker>
            </mat-form-field>
        </section>

        <section>                
            <mat-form-field class="mat-form-field">
                <label class="mat-label other-label mandatory-field">Mechanism of injury</label>
                <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="3" cdkAutosizeMaxRows="5" id="injuryMechanism"
                formControlName="injuryMechanism" class="mat-input-element" maxlength="1000"></textarea>
            </mat-form-field>
        </section>

        <section>
            <mat-form-field class="mat-form-field" color="accent">
                <label class="mat-label other-label">Is the injury consistent with the mechanism of injury?</label>&nbsp;
                <input [hidden]="true" matInput formControlName="isUnfitForWork"/>
                <mat-radio-group formControlName="isInjuryMechanismConsistent" id="isInjuryMechanismConsistent">
                    <mat-radio-button value="Yes">Yes</mat-radio-button>&nbsp;
                    <mat-radio-button value="No">No</mat-radio-button>
                </mat-radio-group>
            </mat-form-field>
        </section>

        <section>                
            <mat-form-field class="mat-form-field">
                <label class="mat-label other-label mandatory-field">Clinical description</label>
                <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="3" cdkAutosizeMaxRows="5" id="clinicalDescription"
                formControlName="clinicalDescription" class="mat-input-element" maxlength="1000"></textarea>
            </mat-form-field>
        </section>

        <section>
            <mat-form-field class="mat-form-field" color="accent">
                <label class="mat-label other-label">Are there any pre-existing conditions?</label>&nbsp;
                <input [hidden]="true" matInput formControlName="isPreExistingConditions"/>
                <mat-radio-group (change)="isPreExistingConditionsChanged($event.value)" formControlName="isPreExistingConditions" id="isPreExistingConditions">
                    <mat-radio-button value="Yes">Yes</mat-radio-button>&nbsp;
                    <mat-radio-button value="No">No</mat-radio-button>
                </mat-radio-group>
            </mat-form-field>
        </section>

        <section *ngIf="form.value.isPreExistingConditions == 'Yes'">                
            <mat-form-field class="mat-form-field">
                <label class="mat-label other-label mandatory-field">Specify pre-existing conditions</label>
                <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="3" cdkAutosizeMaxRows="5" id="preExistingConditions"
                formControlName="preExistingConditions" class="mat-input-element" maxlength="1000"></textarea>
            </mat-form-field>
        </section>
    </form>
</mat-card>
